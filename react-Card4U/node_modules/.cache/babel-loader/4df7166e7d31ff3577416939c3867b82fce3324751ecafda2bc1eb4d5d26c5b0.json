{"ast":null,"code":"import axios from \"axios\";\nimport { successMsg } from \"./feedbacks\";\nconst api = process.env.REACT_APP_API + \"/cardlists\" || \"\";\nexport function getList() {\n  return axios.get(api, {\n    headers: {\n      Authorization: JSON.parse(localStorage.getItem(\"userData\")).token\n    }\n  });\n}\nexport function addCardtoClist(card) {\n  return axios.post(api, card, {\n    headers: {\n      Authorization: JSON.parse(localStorage.getItem(\"userData\")).token\n    }\n  });\n}\nexport function deleteCard(cardId) {\n  return axios.delete(`${api}/${cardId}`);\n}\n\n// export function addCardList(userId: number){\n//     return axios.post(api,{userId: userId,cards: [],quantity: 0});\n// }\n\nexport async function getAllCards() {\n  let res = await axios.get(api);\n  let allCardsArr = [];\n  for (const list of res.data) {\n    for (const card of list.cards) {\n      allCardsArr.push(card);\n    }\n  }\n  return new Promise((res, rej) => {\n    if (allCardsArr.length) {\n      res(allCardsArr);\n    } else {\n      rej(\"no cards!\");\n    }\n  });\n}\n\n// export async function addCardToList (userId: number,card:Card){\n//     let res = await axios.get(`${api}?userId=${userId}`);\n//     let cardArr = res.data[0].cards;\n//     let qua = res.data[0].quantity;\n//     qua++;\n//     localStorage.setItem(\"quantity\",`${qua}`);\n//     cardArr.push(card);\n//     return await axios.patch(`${api}/${res.data[0].id}`,{cards: cardArr, quantity: qua});\n// }\nexport async function deleteCardById(userId, cardDes) {\n  let res = await axios.get(`${api}?userId=${userId}`);\n  let cardArr = res.data[0].cards;\n  let listId = res.data[0].id;\n  let qua = res.data[0].quantity;\n  qua = qua - 1;\n  for (const card of cardArr) {\n    if (card.businessDescription == cardDes) {\n      cardArr.splice(cardArr.indexOf(card), 1);\n    }\n  }\n  return new Promise((res, rej) => {\n    res(axios.patch(`${api}/${listId}`, {\n      cards: cardArr,\n      quantity: qua\n    }).then(() => {\n      successMsg(\"Card Deleted!\");\n      localStorage.setItem(\"quantity\", `${qua}`);\n    }).catch(err => console.log(err)));\n  });\n}\nexport async function getCardByDes(userId, cardDes) {\n  let res = await axios.get(`${api}?userId=${userId}`);\n  let cardArr = res.data[0].cards;\n  let cardToFind;\n  for (const card of cardArr) {\n    if (card.businessDescription == cardDes) {\n      cardToFind = card;\n    }\n  }\n  return new Promise((res, rej) => {\n    if (cardToFind == null) {\n      return rej(\"no card found\");\n    } else {\n      return res(cardToFind);\n    }\n  });\n}\nexport async function updateCardByDes(userId, newCard, cardDes) {\n  let res = await axios.get(`${api}?userId=${userId}`);\n  let cardArr = res.data[0].cards;\n  let listId = res.data[0].id;\n  let newArr = [];\n  for (let card of cardArr) {\n    if (card.businessDescription == cardDes) {\n      newArr.push(newCard);\n    } else {\n      newArr.push(card);\n    }\n  }\n  return new Promise((res, rej) => {\n    res(axios.patch(`${api}/${listId}`, {\n      cards: newArr\n    }).then(() => {}).catch(err => console.log(err)));\n  });\n}\nexport async function getCardListById(userId) {\n  let res = await axios.get(`${api}?userId=${userId}`);\n  return await axios.get(`${api}/${res.data[0].id}`);\n}","map":{"version":3,"names":["axios","successMsg","api","process","env","REACT_APP_API","getList","get","headers","Authorization","JSON","parse","localStorage","getItem","token","addCardtoClist","card","post","deleteCard","cardId","delete","getAllCards","res","allCardsArr","list","data","cards","push","Promise","rej","length","deleteCardById","userId","cardDes","cardArr","listId","id","qua","quantity","businessDescription","splice","indexOf","patch","then","setItem","catch","err","console","log","getCardByDes","cardToFind","updateCardByDes","newCard","newArr","getCardListById"],"sources":["C:/Users/user/Desktop/ahavara/prj node+react/‏‏reactProj-Card4U סופי/reactproject/src/services/cardList.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport Card from \"../interfaces/card\";\r\nimport { successMsg } from \"./feedbacks\";\r\n\r\nconst api: string = process.env.REACT_APP_API + \"/cardlists\" || \"\";\r\n\r\nexport function getList(){\r\n    return axios.get(api,{\r\n        headers: {Authorization: JSON.parse(localStorage.getItem(\"userData\") as string).token}})\r\n}\r\n\r\nexport function addCardtoClist(card: Card){\r\n    return axios.post(api,card,{\r\n        headers: {Authorization: JSON.parse(localStorage.getItem(\"userData\") as string).token}})\r\n}\r\n\r\n\r\nexport function deleteCard(cardId: string){\r\n    return axios.delete(`${api}/${cardId}`,)\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n// export function addCardList(userId: number){\r\n//     return axios.post(api,{userId: userId,cards: [],quantity: 0});\r\n// }\r\n\r\nexport async function getAllCards(){\r\n    let res = await axios.get(api);\r\n    let allCardsArr: Card[] = []\r\n    for (const list of res.data) {\r\n        for (const card of list.cards) {\r\n            allCardsArr.push(card);\r\n        }\r\n    }\r\n    return new Promise((res,rej)=>{\r\n        if(allCardsArr.length){\r\n            res(allCardsArr);\r\n        }else{\r\n            rej(\"no cards!\")\r\n        }\r\n\r\n    })\r\n    \r\n}\r\n\r\n// export async function addCardToList (userId: number,card:Card){\r\n//     let res = await axios.get(`${api}?userId=${userId}`);\r\n//     let cardArr = res.data[0].cards;\r\n//     let qua = res.data[0].quantity;\r\n//     qua++;\r\n//     localStorage.setItem(\"quantity\",`${qua}`);\r\n//     cardArr.push(card);\r\n//     return await axios.patch(`${api}/${res.data[0].id}`,{cards: cardArr, quantity: qua});\r\n// }\r\nexport async function deleteCardById(userId:number, cardDes:string){\r\n    let res = await axios.get(`${api}?userId=${userId}`);\r\n    let cardArr = res.data[0].cards;\r\n    let listId = res.data[0].id;\r\n    let qua = res.data[0].quantity;\r\n    qua = qua-1;\r\n    for (const card of cardArr) {\r\n        if(card.businessDescription == cardDes){\r\n            cardArr.splice(cardArr.indexOf(card),1);\r\n        } \r\n    }\r\n    return new Promise((res,rej) =>{\r\n        res(axios.patch(`${api}/${listId}`,{cards: cardArr, quantity: qua}).then(() => {successMsg(\"Card Deleted!\"); localStorage.setItem(\"quantity\",`${qua}`);}).catch((err) => console.log(err)));\r\n    })\r\n}\r\n\r\n\r\nexport async function getCardByDes(userId: number, cardDes:string){\r\n    let res = await axios.get(`${api}?userId=${userId}`);\r\n    let cardArr = res.data[0].cards;\r\n    let cardToFind: Card;\r\n    \r\n    for (const card of cardArr) {\r\n        if(card.businessDescription == cardDes){\r\n            cardToFind = card;\r\n            \r\n        }\r\n    }\r\n    return new Promise((res,rej) =>{\r\n        if(cardToFind == null){\r\n            return rej(\"no card found\");\r\n        }else{\r\n            return res(cardToFind);\r\n        }\r\n    })\r\n}\r\n\r\nexport async function updateCardByDes(userId:number, newCard: Card, cardDes:string){\r\n    let res = await axios.get(`${api}?userId=${userId}`);\r\n    let cardArr = res.data[0].cards;\r\n    let listId = res.data[0].id;\r\n    let newArr: Card[] = [];\r\n    for (let card of cardArr) {\r\n        if(card.businessDescription == cardDes){\r\n            newArr.push(newCard);\r\n        }else{\r\n            newArr.push(card);\r\n        }\r\n    }\r\n    return new Promise((res,rej) =>{\r\n        res(axios.patch(`${api}/${listId}`,{cards: newArr}).then(() => {}).catch((err) => console.log(err)));\r\n    })\r\n\r\n}\r\n\r\n\r\nexport async function getCardListById (userId:number){\r\n    let res = await axios.get(`${api}?userId=${userId}`);\r\n    return await axios.get(`${api}/${res.data[0].id}`);\r\n}\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}