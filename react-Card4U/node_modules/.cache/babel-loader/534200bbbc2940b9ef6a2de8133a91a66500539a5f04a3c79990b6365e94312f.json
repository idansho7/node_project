{"ast":null,"code":"import axios from \"axios\";\nimport { successMsg } from \"./feedbacks\";\nimport { setLog } from \"./log\";\nconst api = process.env.REACT_APP_API + \"/cardLists\" || \"\";\nexport function addCardList(userId) {\n  return axios.post(api, {\n    userId: userId,\n    cards: [],\n    quantity: 0\n  });\n}\nexport async function getAllCards() {\n  let res = await axios.get(api);\n  let allCardsArr = [];\n  for (const list of res.data) {\n    for (const card of list.cards) {\n      allCardsArr.push(card);\n    }\n  }\n  return new Promise((res, rej) => {\n    if (allCardsArr.length) {\n      res(allCardsArr);\n    } else {\n      rej(\"no cards!\");\n    }\n  });\n}\nexport async function addCardToList(userId, card) {\n  let res = await axios.get(`${api}?userId=${userId}`);\n  let cardArr = res.data[0].cards;\n  let qua = res.data[0].quantity;\n  qua++;\n  localStorage.setItem(\"quantity\", `${qua}`);\n  cardArr.push(card);\n  return await axios.patch(`${api}/${res.data[0].id}`, {\n    cards: cardArr,\n    quantity: qua\n  });\n}\nexport async function deleteCardById(userId, cardDes) {\n  let res = await axios.get(`${api}?userId=${userId}`);\n  let cardArr = res.data[0].cards;\n  let listId = res.data[0].id;\n  let qua = res.data[0].quantity;\n  qua = qua - 1;\n  for (const card of cardArr) {\n    if (card.businessDescription == cardDes) {\n      cardArr.splice(cardArr.indexOf(card), 1);\n    }\n  }\n  return new Promise((res, rej) => {\n    res(axios.patch(`${api}/${listId}`, {\n      cards: cardArr,\n      quantity: qua\n    }).then(() => {\n      successMsg(\"Card Deleted!\");\n      localStorage.setItem(\"quantity\", `${qua}`);\n      setLog(true, true, qua);\n    }).catch(err => console.log(err)));\n  });\n}\nexport async function getCardByDes(userId, cardDes) {\n  let res = await axios.get(`${api}?userId=${userId}`);\n  let cardArr = res.data[0].cards;\n  let cardToFind;\n  for (const card of cardArr) {\n    if (card.businessDescription == cardDes) {\n      cardToFind = card;\n    }\n  }\n  return new Promise((res, rej) => {\n    if (cardToFind == null) {\n      return rej(\"no card found\");\n    } else {\n      return res(cardToFind);\n    }\n  });\n}\nexport async function updateCardByDes(userId, newCard, cardDes) {\n  let res = await axios.get(`${api}?userId=${userId}`);\n  let cardArr = res.data[0].cards;\n  let listId = res.data[0].id;\n  let newArr = [];\n  for (let card of cardArr) {\n    if (card.businessDescription == cardDes) {\n      newArr.push(newCard);\n    } else {\n      newArr.push(card);\n    }\n  }\n  console.log(newArr);\n  return new Promise((res, rej) => {\n    res(axios.patch(`${api}/${listId}`, {\n      cards: newArr\n    }).then(() => {\n      successMsg(\"Card Updated!\");\n    }).catch(err => console.log(err)));\n  });\n}\nexport async function getCardListById(userId) {\n  let res = await axios.get(`${api}?userId=${userId}`);\n  return await axios.get(`${api}/${res.data[0].id}`);\n}","map":{"version":3,"names":["axios","successMsg","setLog","api","process","env","REACT_APP_API","addCardList","userId","post","cards","quantity","getAllCards","res","get","allCardsArr","list","data","card","push","Promise","rej","length","addCardToList","cardArr","qua","localStorage","setItem","patch","id","deleteCardById","cardDes","listId","businessDescription","splice","indexOf","then","catch","err","console","log","getCardByDes","cardToFind","updateCardByDes","newCard","newArr","getCardListById"],"sources":["C:/Users/user/Desktop/ReactProject/reactproject/src/services/cardList.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport Card from \"../interfaces/card\";\r\nimport { successMsg } from \"./feedbacks\";\r\nimport { setLog } from \"./log\";\r\n\r\nconst api: string = process.env.REACT_APP_API + \"/cardLists\" || \"\";\r\nexport function addCardList(userId: number){\r\n    return axios.post(api,{userId: userId,cards: [],quantity: 0});\r\n}\r\n\r\nexport async function getAllCards(){\r\n    let res = await axios.get(api);\r\n    let allCardsArr: Card[] = []\r\n    for (const list of res.data) {\r\n        for (const card of list.cards) {\r\n            allCardsArr.push(card);\r\n        }\r\n    }\r\n    return new Promise((res,rej)=>{\r\n        if(allCardsArr.length){\r\n            res(allCardsArr);\r\n        }else{\r\n            rej(\"no cards!\")\r\n        }\r\n\r\n    })\r\n    \r\n}\r\n\r\nexport async function addCardToList (userId: number,card:Card){\r\n    let res = await axios.get(`${api}?userId=${userId}`);\r\n    let cardArr = res.data[0].cards;\r\n    let qua = res.data[0].quantity;\r\n    qua++;\r\n    localStorage.setItem(\"quantity\",`${qua}`);\r\n    cardArr.push(card);\r\n    return await axios.patch(`${api}/${res.data[0].id}`,{cards: cardArr, quantity: qua});\r\n}\r\nexport async function deleteCardById(userId:number, cardDes:string){\r\n    let res = await axios.get(`${api}?userId=${userId}`);\r\n    let cardArr = res.data[0].cards;\r\n    let listId = res.data[0].id;\r\n    let qua = res.data[0].quantity;\r\n    qua = qua-1;\r\n    for (const card of cardArr) {\r\n        if(card.businessDescription == cardDes){\r\n            cardArr.splice(cardArr.indexOf(card),1);\r\n        } \r\n    }\r\n    return new Promise((res,rej) =>{\r\n        res(axios.patch(`${api}/${listId}`,{cards: cardArr, quantity: qua}).then(() => {successMsg(\"Card Deleted!\"); localStorage.setItem(\"quantity\",`${qua}`); setLog(true,true,qua)}).catch((err) => console.log(err)));\r\n    })\r\n}\r\n\r\n\r\nexport async function getCardByDes(userId: number, cardDes:string){\r\n    let res = await axios.get(`${api}?userId=${userId}`);\r\n    let cardArr = res.data[0].cards;\r\n    let cardToFind: Card;\r\n    \r\n    for (const card of cardArr) {\r\n        if(card.businessDescription == cardDes){\r\n            cardToFind = card;\r\n            \r\n        }\r\n    }\r\n    return new Promise((res,rej) =>{\r\n        if(cardToFind == null){\r\n            return rej(\"no card found\");\r\n        }else{\r\n            return res(cardToFind);\r\n        }\r\n    })\r\n}\r\n\r\nexport async function updateCardByDes(userId:number, newCard: Card, cardDes:string){\r\n    let res = await axios.get(`${api}?userId=${userId}`);\r\n    let cardArr = res.data[0].cards;\r\n    let listId = res.data[0].id;\r\n    let newArr: Card[] = [];\r\n    for (let card of cardArr) {\r\n        if(card.businessDescription == cardDes){\r\n            newArr.push(newCard);\r\n        }else{\r\n            newArr.push(card);\r\n        }\r\n    }\r\n    console.log(newArr);\r\n    return new Promise((res,rej) =>{\r\n        res(axios.patch(`${api}/${listId}`,{cards: newArr}).then(() => {successMsg(\"Card Updated!\")}).catch((err) => console.log(err)));\r\n    })\r\n\r\n}\r\n\r\n\r\nexport async function getCardListById (userId:number){\r\n    let res = await axios.get(`${api}?userId=${userId}`);\r\n    return await axios.get(`${api}/${res.data[0].id}`);\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}